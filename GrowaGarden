-- GAG LOADING UI by namnnni2 (trigger once, fast, and shows percent from 0.1 to 100.0)

local Players = game:GetService("Players")
local CoreGui = game:GetService("CoreGui")

-- Danh s√°ch ng∆∞·ªùi ∆∞u ti√™n
local priorityUsers = {
	"namnnni2", -- Th√™m username t·∫°i ƒë√¢y n·∫øu c·∫ßn
}

-- NgƒÉn kh√¥ng ch·∫°y 2 l·∫ßn
local isShown = false
local function triggerOnce()
	if isShown then return end
	isShown = true

	-- Xo√° n·∫øu c√≥ UI c≈©
	if CoreGui:FindFirstChild("GAGLoadingUI") then
		CoreGui.GAGLoadingUI:Destroy()
	end

	local TweenService = game:GetService("TweenService")

	local screenGui = Instance.new("ScreenGui")
	screenGui.Name = "GAGLoadingUI"
	screenGui.IgnoreGuiInset = true
	screenGui.ResetOnSpawn = false
	screenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
	screenGui.Parent = CoreGui

	local bg = Instance.new("Frame")
	bg.Size = UDim2.new(1, 0, 1, 0)
	bg.BackgroundColor3 = Color3.fromRGB(222, 255, 222)
	bg.BorderSizePixel = 0
	bg.Parent = screenGui

	local title = Instance.new("TextLabel")
	title.Text = "üåª Grow A Garden üêùüçØ"
	title.Font = Enum.Font.FredokaOne
	title.TextSize = 50
	title.TextColor3 = Color3.fromRGB(34, 139, 34)
	title.Size = UDim2.new(1, 0, 0, 80)
	title.Position = UDim2.new(0, 0, 0.1, 0)
	title.BackgroundTransparency = 1
	title.Parent = bg

	local status = Instance.new("TextLabel")
	status.Text = "Script Initializing... Please Wait."
	status.Font = Enum.Font.FredokaOne
	status.TextSize = 25
	status.TextColor3 = Color3.fromRGB(0, 0, 0)
	status.Size = UDim2.new(1, 0, 0, 40)
	status.Position = UDim2.new(0, 0, 0.3, 0)
	status.BackgroundTransparency = 1
	status.Parent = bg

	local barBg = Instance.new("Frame")
	barBg.Size = UDim2.new(0.5, 0, 0, 25)
	barBg.Position = UDim2.new(0.25, 0, 0.4, 0)
	barBg.BackgroundColor3 = Color3.fromRGB(200, 255, 200)
	barBg.BorderSizePixel = 0
	barBg.ClipsDescendants = true
	barBg.Parent = bg

	local barFill = Instance.new("Frame")
	barFill.Size = UDim2.new(0, 0, 1, 0)
	barFill.BackgroundColor3 = Color3.fromRGB(120, 255, 120)
	barFill.BorderSizePixel = 0
	barFill.Parent = barBg

	local percentLabel = Instance.new("TextLabel")
	percentLabel.Text = "0.1%"
	percentLabel.Font = Enum.Font.FredokaOne
	percentLabel.TextSize = 22
	percentLabel.TextColor3 = Color3.fromRGB(0, 100, 0)
	percentLabel.Size = UDim2.new(1, 0, 0, 25)
	percentLabel.Position = UDim2.new(0, 0, 0, -30)
	percentLabel.BackgroundTransparency = 1
	percentLabel.Parent = barBg

	local discordLink = "https://discord.gg/tYqqXYKxFD"
	local discordText = Instance.new("TextLabel")
	discordText.Text = "Join Our Discord: " .. discordLink .. " (copied)"
	discordText.Font = Enum.Font.FredokaOne
	discordText.TextSize = 20
	discordText.TextColor3 = Color3.fromRGB(50, 50, 50)
	discordText.Size = UDim2.new(1, 0, 0, 30)
	discordText.Position = UDim2.new(0, 0, 0.55, 0)
	discordText.BackgroundTransparency = 1
	discordText.Parent = bg

	local preparing = Instance.new("TextLabel")
	preparing.Text = "Preparing environment..."
	preparing.Font = Enum.Font.FredokaOne
	preparing.TextSize = 20
	preparing.TextColor3 = Color3.fromRGB(0, 0, 0)
	preparing.Size = UDim2.new(1, 0, 0, 25)
	preparing.Position = UDim2.new(0, 0, 0.62, 0)
	preparing.BackgroundTransparency = 1
	preparing.Parent = bg

	-- T·ª± ƒë·ªông copy link n·∫øu executor h·ªó tr·ª£
	pcall(function()
		if setclipboard then
			setclipboard(discordLink)
		end
	end)

	-- B·∫Øt ƒë·∫ßu loading bar t·ª´ 0.1% ƒë·∫øn 100.0%
	task.spawn(function()
		local percent = 0.1
		local totalTime = 300 -- 5 ph√∫t
		local interval = 0.1
		local steps = totalTime / interval
		local increment = (100.0 - 0.1) / steps

		for i = 1, steps do
			barFill:TweenSize(UDim2.new(percent / 100, 0, 1, 0), "Out", "Linear", interval * 0.9, true)
			percentLabel.Text = string.format("%.1f%%", percent)
			percent += increment
			task.wait(interval)
		end

		percentLabel.Text = "100.0%"
		barFill.Size = UDim2.new(1, 0, 1, 0)
		wait(0.5)
		screenGui:Destroy()
	end)
end

-- K√≠ch ho·∫°t n·∫øu ng∆∞·ªùi ∆∞u ti√™n ƒëang trong server
for _, player in ipairs(Players:GetPlayers()) do
	if table.find(priorityUsers, player.Name) then
		triggerOnce()
		break
	end
end

-- K√≠ch ho·∫°t khi ng∆∞·ªùi ∆∞u ti√™n join
Players.PlayerAdded:Connect(function(player)
	if table.find(priorityUsers, player.Name) then
		triggerOnce()
	end
	player.Chatted:Connect(function(msg)
		if msg:lower():match("^start$") then
			triggerOnce()
		end
	end)
end)

-- K√≠ch ho·∫°t khi ai ƒë√≥ trong server hi·ªán t·∫°i chat "START"
for _, player in ipairs(Players:GetPlayers()) do
	player.Chatted:Connect(function(msg)
		if msg:lower():match("^start$") then
			triggerOnce()
		end
	end)
end
