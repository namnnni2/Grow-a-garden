local TeleportService = game:GetService("TeleportService")
local Players = game:GetService("Players")
local ReplicatedStorage = game:GetService("ReplicatedStorage")

local plr = Players.LocalPlayer
local PLACE_ID = 126884695634066
local MAX_PLAYERS = 4

local function hop(reason)
    TeleportService:Teleport(PLACE_ID, plr)
end

local function checkAndHop()
    if game.PlaceId ~= PLACE_ID then
        hop("Wrong PlaceId")
        return
    end

    if #Players:GetPlayers() > MAX_PLAYERS then
        hop("Too many players")
        return
    end

    local getServerTypeFunc = ReplicatedStorage:FindFirstChild("GetServerType")
    if getServerTypeFunc and getServerTypeFunc:IsA("RemoteFunction") then
        local success, serverType = pcall(function()
            return getServerTypeFunc:InvokeServer()
        end)
        if success and serverType == "VIPServer" then
            hop("VIP Server not allowed")
            return
        end
    end
end

checkAndHop()
